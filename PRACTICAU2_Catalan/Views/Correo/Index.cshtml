@model PRACTICAU2_Catalan.Models.Correo
@{
    ViewBag.Title = "Correo";

    var personaModel = (List<PRACTICAU2_Catalan.Models.Persona>)ViewBag.CountryList;


}
<br />
<h1 class="page-header text-center ">
    Correo
</h1>
<div class=""><h3>Seleccione las personas a las cuales enviar el correo</h3></div>

@Html.Partial("_PersonaPartial", personaModel)

@using (Html.BeginForm("Enviar", "Correo", FormMethod.Post))
{
    <div class="form-group">
        @*@Html.Label("Para: ")*@
        <input type="hidden"  class="form-control" id="para" name="idpersonas" />
    </div>

    <div class="form-group">
        @Html.Label("Asunto: ")
        <input type="text" class="form-control" id="frmasunto" name="frmasunto" />
    </div>

    <div class="form-group">
        @Html.Label("Mesaje: ")
        <textarea rows="4" cols="50" id="frmasunto2" name="frmasunto2" class="form-control"></textarea>
        @*<input type="text" class="form-control" id="frmasunto2" name="frmasunto2" />*@
    </div>

    <div class="form-group">
        @Html.Label("Importancia: ")
        <select id="frmimportancia" name="frmimportancia" class="form-control" >
            <option value="Alta">Alta</option>
            <option value="Media">Media</option>
            <option value="Baja">Baja</option>
        </select>
    </div>

    <input type="submit" class="btn btn-success" value="ENVIAR" />

}
<script>
    function myFunction() {
        var y = document.getElementsByTagName("input");
        var i;
        var mail = "";
        for (i = 0; i < y.length; i++) {
            if (y[i].type == "checkbox") {
                if (y[i].checked) {
                    mail += y[i].value + "-";
                }
            }
        }
        var lista = mail.split("-");

        lista.pop();

        var para = document.getElementById('para');
        para.value = lista;

        var idPara = document.getElementById('idPara');
        idPara.value = lista;
    }
</script>